#!/usr/bin/env bash
if [ -z "$1" ]; then 
    echo Print out hosts file entries for all the ServerName and
    echo ServerAliases in a specified vhost or sites directory
    echo 
    echo EXAMPLE OUTPUT
    echo
    echo 192.168.1.190 widgets-ak.visualdna.com
    echo 192.168.1.190 widgets-ak.vm.visualdna.com
    echo 192.168.1.190 www.mirror.co.uk
    echo 192.168.1.190 www.latimes.com
    echo 
    echo USAGE
    echo 
    echo usage: $0 /etc/apache2/sites-enabled
    echo usage: $0 example.com.vhost
    exit
fi
ip=`ifconfig eth0 | grep 'inet addr' | awk '{print $2}' | sed -e 's/addr://'`
grep -hEr 'ServerName|ServerAlias' $1 | grep -v '#' | awk "{print \"$ip\", \$2}"
